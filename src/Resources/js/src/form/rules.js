"use strict";!function(){function e(e){return new RegExp("^"+e.split(/\*+/).map(t).join(".*")+"$","i")}function t(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}var r="any",a="all",n="ff-compile-rules",i=new WeakMap,s=function(){var e=document.createEvent("Event");return e.initEvent(n,!0,!0),e},o=function(t){var n=t.target,s=i.get(n),o=s.targets,l=s.rule,c=l.type,u=l.show,f=c===a;for(var v in o)if(o.hasOwnProperty(v)){for(var d=o[v],p=d.elements,h=d.operand,g=d.value,m=[],y=!1,w=0;w<p.length;w++){var b=p[w],k=b.getAttribute("type");"hidden"!==k&&(["checkbox","radio"].indexOf(k)!==-1?(y=!0,b.checked&&m.push(b.value.toLowerCase())):m.push(b.value.toLowerCase()))}var E=void 0;if(y&&""===g)E="="===h?!m.length:!!m.length;else{for(var L=e(g),O=!1,x=0;x<m.length;x++){var A=m[x];L.test(A)&&(O=!0)}E="="===h?O:!O}if(c===r&&E){f=!0;break}c!==a||E||(f=!1)}n.style.display=f?u?"block":"none":u?"none":"block"},l=function(e){var t=e.tagName.toLowerCase();return["select","textarea"].indexOf(t)!==-1?t:e.classList.contains("form-date-time-field")?"date":e.getAttribute("type").toLowerCase()},c=document.querySelectorAll("form[data-ff-rules-enabled]");for(var u in c)if(c.hasOwnProperty(u)){var f=c[u],v=f.querySelectorAll("*[data-ff-rule]"),d=function(e){if(!v.hasOwnProperty(e))return"continue";var t=v[e],r=t.dataset.ffRule;/^'.*'$/.test(r)&&(r=r.substring(1,r.length-1));var a=JSON.parse(r),c=[];for(var u in a.criteria)if(a.criteria.hasOwnProperty(u)){var d=a.criteria[u],p=d.tgt,h=d.o,g=d.val,m=void 0,y=!1;if(f.elements[p]){var w=f.elements[p].tagName;m=w?[f.elements[p]]:f.elements[p]}else f.elements[p+"[]"]&&(m=f.elements[p+"[]"],y=!0);c.push({isMultiple:y,elements:m,operand:h,value:g});for(var b=0;b<m.length;b++){var k=m[b],E=void 0;switch(l(k)){case"checkbox":case"radio":E="click";break;case"select":case"date":E="change";break;default:E="keyup"}k.addEventListener(E,function(){return t.dispatchEvent(s())})}}i.set(t,{rule:a,targets:c}),t.addEventListener(n,o),t.dispatchEvent(s())};for(var p in v){d(p)}}}();